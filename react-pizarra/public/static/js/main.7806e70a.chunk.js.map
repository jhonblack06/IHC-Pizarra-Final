{"version":3,"sources":["reportWebVitals.js","utils/api/index.js","utils/reducers/index.js","LoadingModal/LoadingModal.js","Login/Login.js","utils/actions/index.js","Main/socket.js","Main/Emitter.js","Main/MediaDevice.js","Main/PeerConnection.js","Main/MainWindow.js","Main/CallWindow.js","Main/CallModal.js","Main/Main.js","App.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","BASE_URL","socket","socketIOClient","transports","path","delay","ms","Promise","resolve","setTimeout","randomNumber","min","max","Math","floor","random","simulateNetworkLatency","callApi","endpoint","a","auth","options","headers","Accept","url","authorization","localStorage","getItem","fetch","response","json","index","login","form","method","body","JSON","stringify","validate","empresas","list","unidades","empresa","tracker","unidad","cajas","mensajes","enviar","data","dietas","page","search","query","create","badge","read","badgeId","update","updates","remove","getMarkers","on","console","log","emit","endPoint","reducer","state","action","type","isAuth","payload","isMobileOpen","isMiniActive","Modal","props","isOpen","ReactDOM","createPortal","className","document","getElementById","mapDispatchToProps","setAuth","connect","React","useState","user","setUser","pass","setPass","loading","setLoading","error","setError","handleSubmit","event","preventDefault","Api","msg","setItem","id","name","token","history","push","style","backgroundColor","padding","borderRadius","color","Form","onSubmit","Group","controlId","placeholder","value","onChange","target","trim","Button","variant","size","marginLeft","io","Emitter","this","events","args","forEach","fn","_","isFunction","listeners","findIndex","_fn","splice","MediaDevice","navigator","mediaDevices","getUserMedia","video","facingMode","height","ideal","audio","stream","catch","err","DOMException","alert","len","arguments","length","track","enabled","set","getTracks","stop","PC_CONFIG","iceServers","urls","PeerConnection","friendID","pc","RTCPeerConnection","onicecandidate","to","candidate","from","ontrack","streams","mediaDevice","isCaller","config","addTrack","createOffer","start","isStarter","close","off","getDescription","bind","createAnswer","desc","setLocalDescription","sdp","rtcSdp","RTCSessionDescription","setRemoteDescription","iceCandidate","RTCIceCandidate","addIceCandidate","MainWindow","startCall","clientId","setFriendID","callWithVideo","defaultValue","readOnly","spellCheck","onClick","getButtonClass","icon","classnames","disable","CallWindow","peerSrc","localSrc","status","endCall","peerVideo","useRef","localVideo","setVideo","setAudio","useEffect","current","srcObject","toggle","toggleMediaDevice","deviceType","ref","autoPlay","muted","CallModal","callFrom","rejectCall","acceptWithVideo","Main","callWindow","callModal","startCallHandler","endCallHandler","rejectCallHandler","title","setState","src","newState","isEmpty","Component","exact","component","Login","hist","createBrowserHistory","initialValues","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","result","finally","store","createStore","render"],"mappings":"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","file":"static/js/main.7806e70a.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import socketIOClient from \"socket.io-client\";\n\nconst BASE_URL = 'https://murcielago.pe:5000';\n\nconst socket = socketIOClient(BASE_URL, {transports: ['websocket'], path: '/bridge'});\n\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst randomNumber = (min = 0, max = 1) =>\n    Math.floor(Math.random() * (max - min + 1)) + min;\nconst simulateNetworkLatency = (min = 30, max = 1500) =>\n    delay(randomNumber(min, max));\n\nasync function callApi(endpoint, auth = false, options = {}) {\n\n    await simulateNetworkLatency();\n\n    options.headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n    };\n\n    let url = BASE_URL + endpoint;\n    if (auth) {\n        url = BASE_URL + '/api' + endpoint;\n        options.headers.authorization = 'Bearer ' + localStorage.getItem('token')\n    }\n\n    const response = await fetch(url, options);\n    return await response.json();\n}\n\nconst index = {\n    auth: {\n        login(form) {\n            return callApi('/login', false, {\n                method: 'POST',\n                body: JSON.stringify(form)\n            });\n        },\n        validate() {\n            return callApi('/validate', true);\n        }\n    },\n    empresas: {\n        list(min) {\n            return callApi(`/empresas${min && `?min=true`}`, true);\n        }\n    },\n    unidades: {\n        list(empresa, min) {\n            return callApi(`/unidades?empresa=${empresa}${min && `&min=true`}`, true);\n        }\n    },\n    tracker: {\n        list(empresa, unidad) {\n            return callApi(`/tracker?empresa=${empresa}&unidad=${unidad}`, false);\n        },\n        unidad(empresa, unidad) {\n            return callApi(`/tracker/unidad?empresa=${empresa}&unidad=${unidad}`, false);\n        }\n    },\n    cajas: {\n        list(empresa) {\n            return callApi(`/cajas?empresa=${empresa}`, false);\n        }\n    },\n    mensajes: {\n        enviar(data) {\n            return callApi('/mensajes', true, {\n                method: 'POST',\n                body: JSON.stringify(data),\n            });\n        },\n    },\n    dietas: {\n        list(page, max) {\n            return callApi('/dietas?page=' + page + '&max=' + max, true);\n        },\n        search(query, page, max) {\n            return callApi('/dietas?query=' + query + '&page=' + page + '&max=' + max, true);\n        },\n        create(badge) {\n            return callApi('/badges', true, {\n                method: 'POST',\n                body: JSON.stringify(badge),\n            });\n        },\n        read(badgeId) {\n            //return callApi('/badges/${badgeId}');\n        },\n        update(badgeId, updates) {\n            /*return callApi('/badges/${badgeId}', {\n              method: 'PUT',\n              body: JSON.stringify(updates),\n            });*/\n        },\n        // Lo hubiera llamado 'delete', pero 'delete' es un keyword en JavaScript asi que no es buena idea :P\n        remove(badgeId) {\n            /*return callApi('/badges/${badgeId}', {\n              method: 'DELETE',\n            });*/\n        },\n    },\n    socket: {\n        getMarkers(data) {\n            socket.on('get', response => data(null, response));\n        },\n        on() {\n            socket.on(\"get\", data => {\n                console.log(data)\n            });\n        },\n        emit(endPoint, data) {\n            socket.emit(endPoint, data);\n        }\n    }\n};\n\nexport default index;\n","const reducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'SET_AUTH':\r\n            return {\r\n                ...state,\r\n                isAuth: action.payload,\r\n            };\r\n        case 'SET_MOBILE_OPEN':\r\n            return {\r\n                ...state,\r\n                isMobileOpen: action.payload,\r\n            };\r\n        case 'SET_MINI_ACTIVE':\r\n            return {\r\n                ...state,\r\n                isMiniActive: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default reducer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './LoadingModal.css'\r\n\r\nfunction Modal(props) {\r\n    if (!props.isOpen) {\r\n        return null;\r\n    }\r\n    return (\r\n        ReactDOM.createPortal(\r\n            <div\r\n                className='Modal'\r\n            >\r\n                <i className=\"fas fa-spinner fa-pulse fa-3x\"/>\r\n            </div>,\r\n            document.getElementById('modal')\r\n        )\r\n    )\r\n}\r\n\r\nexport default Modal;","import React from 'react';\r\nimport Api from \"../utils/api\";\r\nimport {setAuth} from \"../utils/actions\";\r\nimport {connect} from 'react-redux';\r\nimport {Button, Form} from \"react-bootstrap\";\r\nimport LoadingModal from \"../LoadingModal/LoadingModal\";\r\n\r\nfunction Login(props) {\r\n    const [user, setUser] = React.useState('');\r\n    const [pass, setPass] = React.useState('');\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [error, setError] = React.useState(false);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        setLoading(true)\r\n        setError(false)\r\n\r\n        console.log('Login', user, pass)\r\n\r\n        try {\r\n            let data = await Api.auth.login({\r\n                user,\r\n                pass\r\n            })\r\n            if (data.msg === 'ok') {\r\n                localStorage.setItem('id', data.data.id)\r\n                localStorage.setItem('name', data.data.name)\r\n                localStorage.setItem('token', data.data.token)\r\n                props.setAuth(true);\r\n                props.history.push('/')\r\n            } else {\r\n                setLoading(false)\r\n                setError(true)\r\n            }\r\n        } catch (error) {\r\n            setLoading(false)\r\n            setError(true)\r\n        }\r\n    };\r\n\r\n    return(\r\n        <>\r\n            <LoadingModal isOpen={loading}/>\r\n            <div className=\"container main-window\">\r\n                <h1>Login</h1>\r\n                {\r\n                    error &&\r\n                    <div style={{backgroundColor: \"#f44336\", padding: 8, borderRadius: 8}}>\r\n                        <span className=\"h4\" style={{color: \"#fff\"}}>Error de inicio de sesión</span>\r\n                    </div>\r\n                }\r\n                <Form onSubmit={handleSubmit}>\r\n                    <Form.Group controlId=\"formBasicEmail\">\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"txt-clientId\"\r\n                            name=\"user\"\r\n                            placeholder=\"Usuario\"\r\n                            value={user}\r\n                            onChange={(event) => {\r\n                                setUser(event.target.value.trim())\r\n                            }}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formBasicPassword\">\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"txt-clientId\"\r\n                            name=\"pass\"\r\n                            placeholder=\"Contraseña\"\r\n                            value={pass}\r\n                            onChange={(event) => {\r\n                                setPass(event.target.value.trim())\r\n                            }}\r\n                        />\r\n                    </Form.Group>\r\n                    <br/>\r\n                    <Button variant=\"info\" type=\"submit\" size=\"lg\" style={{marginLeft: 16}}>\r\n                        Ingresar\r\n                    </Button>\r\n                </Form>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuth: state.isAuth\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    setAuth\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","export const setAuth = payload => ({\r\n    type: 'SET_AUTH',\r\n    payload,\r\n});\r\n\r\nexport const setMobileOpen = payload => ({\r\n    type: 'SET_MOBILE_OPEN',\r\n    payload,\r\n});\r\n\r\nexport const setMiniActive = payload => ({\r\n    type: 'SET_MINI_ACTIVE',\r\n    payload,\r\n});","import io from 'socket.io-client';\n\nconst socket = io('https://murcielago.pe:5000', { path: '/bridge' });\n\nexport default socket;\n","import _ from 'lodash';\n\nclass Emitter {\n  constructor() {\n    this.events = {};\n  }\n\n  emit(event, ...args) {\n    if (this.events[event]) {\n      this.events[event].forEach((fn) => fn(...args));\n    }\n    return this;\n  }\n\n  on(event, fn) {\n    if (this.events[event]) this.events[event].push(fn);\n    else this.events[event] = [fn];\n    return this;\n  }\n\n  off(event, fn) {\n    if (event && _.isFunction(fn)) {\n      const listeners = this.events[event];\n      const index = listeners.findIndex((_fn) => _fn === fn);\n      listeners.splice(index, 1);\n    } else this.events[event] = [];\n    return this;\n  }\n}\n\nexport default Emitter;\n","import _ from 'lodash';\nimport Emitter from './Emitter';\n\n/**\n * Manage all media devices\n */\nclass MediaDevice extends Emitter {\n  /**\n   * Start media devices and send stream\n   */\n  start() {\n    const constraints = {\n      video: {\n        facingMode: 'user',\n        height: { min: 360, ideal: 720, max: 1080 }\n      },\n      audio: true\n    };\n\n    navigator.mediaDevices\n      .getUserMedia(constraints)\n      .then((stream) => {\n        this.stream = stream;\n        this.emit('stream', stream);\n      })\n      .catch((err) => {\n        if (err instanceof DOMException) {\n          alert('Cannot open webcam and/or microphone');\n        } else {\n          console.log(err);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Turn on/off a device\n   * @param {String} type - Type of the device\n   * @param {Boolean} [on] - State of the device\n   */\n  toggle(type, on) {\n    const len = arguments.length;\n    if (this.stream) {\n      this.stream[`get${type}Tracks`]().forEach((track) => {\n        const state = len === 2 ? on : !track.enabled;\n        _.set(track, 'enabled', state);\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Stop all media track of devices\n   */\n  stop() {\n    if (this.stream) {\n      this.stream.getTracks().forEach((track) => track.stop());\n    }\n    return this;\n  }\n}\n\nexport default MediaDevice;\n","import MediaDevice from './MediaDevice';\nimport Emitter from './Emitter';\nimport socket from './socket';\n\nconst PC_CONFIG = { iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] };\n\nclass PeerConnection extends Emitter {\n  /**\n     * Create a PeerConnection.\n     * @param {String} friendID - ID of the friend you want to call.\n     */\n  constructor(friendID) {\n    super();\n    this.pc = new RTCPeerConnection(PC_CONFIG);\n    this.pc.onicecandidate = (event) => socket.emit('call', {\n      to: this.friendID,\n      candidate: event.candidate,\n      from: localStorage.getItem('id')\n    });\n    this.pc.ontrack = (event) => this.emit('peerStream', event.streams[0]);\n\n    this.mediaDevice = new MediaDevice();\n    this.friendID = friendID;\n  }\n\n  /**\n   * Starting the call\n   * @param {Boolean} isCaller\n   * @param {Object} config - configuration for the call {audio: boolean, video: boolean}\n   */\n  start(isCaller, config) {\n    this.mediaDevice\n      .on('stream', (stream) => {\n        stream.getTracks().forEach((track) => {\n          this.pc.addTrack(track, stream);\n        });\n        this.emit('localStream', stream);\n        if (isCaller) socket.emit('request', { from: localStorage.getItem('id'), to: this.friendID });\n        else this.createOffer();\n      })\n      .start(config);\n\n    return this;\n  }\n\n  /**\n   * Stop the call\n   * @param {Boolean} isStarter\n   */\n  stop(isStarter) {\n    if (isStarter) {\n      socket.emit('end', { to: this.friendID });\n    }\n    this.mediaDevice.stop();\n    this.pc.close();\n    this.pc = null;\n    this.off();\n    return this;\n  }\n\n  createOffer() {\n    this.pc.createOffer()\n      .then(this.getDescription.bind(this))\n      .catch((err) => console.log(err));\n    return this;\n  }\n\n  createAnswer() {\n    this.pc.createAnswer()\n      .then(this.getDescription.bind(this))\n      .catch((err) => console.log(err));\n    return this;\n  }\n\n  getDescription(desc) {\n    this.pc.setLocalDescription(desc);\n    socket.emit('call', { to: this.friendID, sdp: desc });\n    return this;\n  }\n\n  /**\n   * @param {Object} sdp - Session description\n   */\n  setRemoteDescription(sdp) {\n    const rtcSdp = new RTCSessionDescription(sdp);\n    this.pc.setRemoteDescription(rtcSdp);\n    return this;\n  }\n\n  /**\n   * @param {Object} candidate - ICE Candidate\n   */\n  addIceCandidate(candidate) {\n    if (candidate) {\n      const iceCandidate = new RTCIceCandidate(candidate);\n      this.pc.addIceCandidate(iceCandidate);\n    }\n    return this;\n  }\n}\n\nexport default PeerConnection;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction MainWindow({ startCall, clientId }) {\n  const [friendID, setFriendID] = useState(null);\n\n  /**\n   * Start the call with or without video\n   * @param {Boolean} video\n   */\n  const callWithVideo = (video) => {\n    const config = { audio: true, video };\n    return () => friendID && startCall(true, friendID, config);\n  };\n\n  return (\n    <div className=\"container main-window\">\n      <div>\n        <h3>\n          Hi {localStorage.getItem('name')}, your ID is\n          <input\n            type=\"text\"\n            className=\"txt-clientId\"\n            defaultValue={clientId}\n            readOnly\n          />\n        </h3>\n        <h4>Get started by calling a friend below</h4>\n      </div>\n      <div>\n        <input\n          type=\"text\"\n          className=\"txt-clientId\"\n          spellCheck={false}\n          placeholder=\"Your friend ID\"\n          onChange={(event) => setFriendID(event.target.value)}\n        />\n        <div>\n          <button\n            type=\"button\"\n            className=\"btn-action fa fa-video-camera\"\n            onClick={callWithVideo(true)}\n          />\n          <button\n            type=\"button\"\n            className=\"btn-action fa fa-phone\"\n            onClick={callWithVideo(false)}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nMainWindow.propTypes = {\n  clientId: PropTypes.string.isRequired,\n  startCall: PropTypes.func.isRequired\n};\n\nexport default MainWindow;\n","import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nconst getButtonClass = (icon, enabled) => classnames(`btn-action fa ${icon}`, { disable: !enabled });\n\nfunction CallWindow({ peerSrc, localSrc, config, mediaDevice, status, endCall }) {\n  const peerVideo = useRef(null);\n  const localVideo = useRef(null);\n  const [video, setVideo] = useState(config.video);\n  const [audio, setAudio] = useState(config.audio);\n\n  useEffect(() => {\n    if (peerVideo.current && peerSrc) peerVideo.current.srcObject = peerSrc;\n    if (localVideo.current && localSrc) localVideo.current.srcObject = localSrc;\n  });\n\n  useEffect(() => {\n    if (mediaDevice) {\n      mediaDevice.toggle('Video', video);\n      mediaDevice.toggle('Audio', audio);\n    }\n  });\n\n  /**\n   * Turn on/off a media device\n   * @param {String} deviceType - Type of the device eg: Video, Audio\n   */\n  const toggleMediaDevice = (deviceType) => {\n    if (deviceType === 'video') {\n      setVideo(!video);\n      mediaDevice.toggle('Video');\n    }\n    if (deviceType === 'audio') {\n      setAudio(!audio);\n      mediaDevice.toggle('Audio');\n    }\n  };\n\n  return (\n    <div className={classnames('call-window', status)}>\n      <video id=\"peerVideo\" ref={peerVideo} autoPlay />\n      <video id=\"localVideo\" ref={localVideo} autoPlay muted />\n      <div className=\"video-control\">\n        <button\n          key=\"btnVideo\"\n          type=\"button\"\n          className={getButtonClass('fa-video-camera', video)}\n          onClick={() => toggleMediaDevice('video')}\n        />\n        <button\n          key=\"btnAudio\"\n          type=\"button\"\n          className={getButtonClass('fa-microphone', audio)}\n          onClick={() => toggleMediaDevice('audio')}\n        />\n        <button\n          type=\"button\"\n          className=\"btn-action hangup fa fa-phone\"\n          onClick={() => endCall(true)}\n        />\n      </div>\n    </div>\n  );\n}\n\nCallWindow.propTypes = {\n  status: PropTypes.string.isRequired,\n  localSrc: PropTypes.object, // eslint-disable-line\n  peerSrc: PropTypes.object, // eslint-disable-line\n  config: PropTypes.shape({\n    audio: PropTypes.bool.isRequired,\n    video: PropTypes.bool.isRequired\n  }).isRequired,\n  mediaDevice: PropTypes.object, // eslint-disable-line\n  endCall: PropTypes.func.isRequired\n};\n\nexport default CallWindow;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\n\nfunction CallModal({ status, callFrom, startCall, rejectCall }) {\n  const acceptWithVideo = (video) => {\n    const config = { audio: true, video };\n    return () => startCall(false, callFrom, config);\n  };\n\n  return (\n    <div className={classnames('call-modal', status)}>\n      <p>\n        <span className=\"caller\">{`${callFrom} is calling`}</span>\n      </p>\n      <button\n        type=\"button\"\n        className=\"btn-action fa fa-video-camera\"\n        onClick={acceptWithVideo(true)}\n      />\n      <button\n        type=\"button\"\n        className=\"btn-action fa fa-phone\"\n        onClick={acceptWithVideo(false)}\n      />\n      <button\n        type=\"button\"\n        className=\"btn-action hangup fa fa-phone\"\n        onClick={rejectCall}\n      />\n    </div>\n  );\n}\n\nCallModal.propTypes = {\n  status: PropTypes.string.isRequired,\n  callFrom: PropTypes.string.isRequired,\n  startCall: PropTypes.func.isRequired,\n  rejectCall: PropTypes.func.isRequired\n};\n\nexport default CallModal;\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport socket from './socket';\r\nimport PeerConnection from './PeerConnection';\r\nimport MainWindow from './MainWindow';\r\nimport CallWindow from './CallWindow';\r\nimport CallModal from './CallModal';\r\n\r\nclass Main extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            clientId: '',\r\n            callWindow: '',\r\n            callModal: '',\r\n            callFrom: '',\r\n            localSrc: null,\r\n            peerSrc: null\r\n        };\r\n        this.pc = {};\r\n        this.config = null;\r\n        this.startCallHandler = this.startCall.bind(this);\r\n        this.endCallHandler = this.endCall.bind(this);\r\n        this.rejectCallHandler = this.rejectCall.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        socket\r\n            .on('init', ({ id: clientId }) => {\r\n                document.title = `${clientId} - VideoCall`;\r\n                this.setState({ clientId });\r\n            })\r\n            .on('request', ({ from: callFrom }) => {\r\n                this.setState({ callModal: 'active', callFrom });\r\n            })\r\n            .on('call', (data) => {\r\n                if (data.sdp) {\r\n                    this.pc.setRemoteDescription(data.sdp);\r\n                    if (data.sdp.type === 'offer') this.pc.createAnswer();\r\n                } else this.pc.addIceCandidate(data.candidate);\r\n            })\r\n            .on('end', this.endCall.bind(this, false))\r\n            .emit('init', localStorage.getItem('id'));\r\n    }\r\n\r\n    startCall(isCaller, friendID, config) {\r\n        this.config = config;\r\n        this.pc = new PeerConnection(friendID)\r\n            .on('localStream', (src) => {\r\n                const newState = { callWindow: 'active', localSrc: src };\r\n                if (!isCaller) newState.callModal = '';\r\n                this.setState(newState);\r\n            })\r\n            .on('peerStream', (src) => this.setState({ peerSrc: src }))\r\n            .start(isCaller, config);\r\n    }\r\n\r\n    rejectCall() {\r\n        const { callFrom } = this.state;\r\n        socket.emit('end', { to: callFrom });\r\n        this.setState({ callModal: '' });\r\n    }\r\n\r\n    endCall(isStarter) {\r\n        if (_.isFunction(this.pc.stop)) {\r\n            this.pc.stop(isStarter);\r\n        }\r\n        this.pc = {};\r\n        this.config = null;\r\n        this.setState({\r\n            callWindow: '',\r\n            callModal: '',\r\n            localSrc: null,\r\n            peerSrc: null\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { clientId, callFrom, callModal, callWindow, localSrc, peerSrc } = this.state;\r\n        return (\r\n            <div>\r\n                <MainWindow\r\n                    clientId={clientId}\r\n                    startCall={this.startCallHandler}\r\n                />\r\n                {!_.isEmpty(this.config) && (\r\n                    <CallWindow\r\n                        status={callWindow}\r\n                        localSrc={localSrc}\r\n                        peerSrc={peerSrc}\r\n                        config={this.config}\r\n                        mediaDevice={this.pc.mediaDevice}\r\n                        endCall={this.endCallHandler}\r\n                    />\r\n                ) }\r\n                <CallModal\r\n                    status={callModal}\r\n                    startCall={this.startCallHandler}\r\n                    rejectCall={this.rejectCallHandler}\r\n                    callFrom={callFrom}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Main;","import React from 'react';\nimport {BrowserRouter, Route, Switch, Redirect} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport Login from \"./Login/Login\";\nimport Main from \"./Main/Main\";\n\nconst App = (props) => (\n    <BrowserRouter>\n        <Switch>\n            <Route\n                exact path=\"/login\"\n                component={Login}\n            />\n            {\n                (props.isAuth) ?\n                    <Route\n                        exact path=\"/\"\n                        component={Main}\n                    />\n                    :\n                    <Redirect to=\"/login\"/>\n            }\n        </Switch>\n    </BrowserRouter>\n)\n\nconst mapStateToProps = state => {\n    return {\n        isAuth: state.isAuth\n    }\n};\n\nexport default connect(mapStateToProps, null)(App);\n\n/*const App = (props) => (\n    <BrowserRouter>\n      <Switch>\n        <Route\n            exact path=\"/login\"\n            component={Login}\n        />\n        {\n          (props.isAuth) ?\n              <Layout>\n                <Switch>\n                  <Route\n                      exact path=\"/\"\n                      component={Inicio}\n                  />\n                  <Route\n                      exact path=\"/pacientes\"\n                      component={Pacientes}\n                  />\n                  <Route\n                      exact path=\"/pacientes/:id\"\n                      component={Paciente}\n                  />\n                  <Route\n                      exact path=\"/dietas\"\n                      component={Dietas}\n                  />\n                  <Route\n                      exact path=\"/dietas/:id\"\n                      component={Dieta}\n                  />\n                  <Route component={NotFound}/>\n                </Switch>\n              </Layout>\n              :\n              <Redirect to=\"/login\"/>\n        }\n      </Switch>\n    </BrowserRouter>\n\n);*/","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, compose } from \"redux\"\nimport { createBrowserHistory } from \"history\";\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport reportWebVitals from './reportWebVitals';\nimport Api from \"./utils/api\";\nimport reducer from \"./utils/reducers\";\nimport App from './App';\nimport './css/app.scss';\n\nconst hist = createBrowserHistory();\n\nlet initialValues = {\n    isAuth: false\n};\n\n//Dev\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nApi.auth.validate().then(result => {\n    if(result.msg === 'ok') {\n        initialValues.isAuth = true\n    }\n}).catch(error => {\n}).finally(() => {\n    const store = createStore(reducer, initialValues, composeEnhancers()); //composeEnhancers()\n\n    ReactDOM.render(\n        <Provider store={store}>\n            <Router history={hist}>\n                <App></App>\n            </Router>\n        </Provider>, document.getElementById('root'));\n});\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}